on:
  push:
    branches:
      - 'wip,*'
env:
  NODE_TLS_REJECT_UNAUTHORIZED: 0

jobs:
  jsonResume:
    name: resume-json
    runs-on: ubuntu-latest
    strategy:
      matrix:
       themes: [flat,modern,elegant,classy,kendall,kwan,slick,spartan]
    steps:
      - uses: actions/checkout@v1
        with:
          fetch-depth: 1
      - uses: actions/setup-node@v1
        with:
          node-version: 12
      - name: install prereqs
        run: |
          apt -y install nodejs npm 
          npm install --unsafe-perm=true --allow-root -g resume-cli 
      - name: install pdf deps
        run: |
          resume export --theme ${{ matrix.themes }} --format pdf
  hackMyResume:
    name: hackMyResume
    runs-on: ubuntu-latest
    strategy:
      matrix:
       hackmyresumeThemes: [minimist,modern,compact,positive,orbit,a11y,elegant,kendall,eloquent,classy,slick,crisp,boilerplate]
    steps:
      - uses: actions/checkout@v1
        with:
          fetch-depth: 1
      - uses: actions/setup-node@v1
        with:
          node-version: 12
      - name: install prereqs
        run: |
          apt -y install nodejs npm xvfb libfontconfig wkhtmltopdf
          npm install -g hackmyresume 
      - name: install pdf deps
        run: |
          npm install -g jsonresume-theme-${{ matrix.hackmyresumeThemes }}
          hackmyresume build resume.json to out/resume.all -t node_modules/jsonresume-theme-${{ matrix.hackmyresumeThemes }} 
